<% layout('/layouts/login_navbar.ejs') -%>
<% if (user.info !== undefined) { %>
    <div class="flex items-center justify-center min-h-screen bg-gray-100">
        <div class="bg-white p-12 rounded-lg shadow-lg max-w-3xl w-full">
            <h2 class="text-3xl font-bold text-center mb-8">Admin Profile</h2>
            <div class="flex flex-col md:flex-row items-center md:items-start gap-12">
                <!-- Profile Section -->
                <div class="w-full md:w-1/3 flex flex-col items-center">
                    <img src="/images/default_profile.jpg" alt="Profile" class="w-56 h-56 rounded-full shadow-lg">
                    <a href="/login/admin/profile/edit" class="mt-6 flex items-center gap-2 text-blue-600 hover:underline">
                        <img src="/images/svg/edit.svg" alt="Edit" class="w-6">
                        Edit Profile
                    </a>
                </div>
                <!-- Details Section -->
                <div class="w-full md:w-2/3">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div>
                            <label class="block text-gray-700 font-semibold">Name:</label>
                            <p class="text-gray-900 text-lg"><%= user.name %></p>
                        </div>
                        <div>
                            <label class="block text-gray-700 font-semibold">Email:</label>
                            <p class="text-gray-900 text-lg"><%= user.email %></p>
                        </div>
                        <div>
                            <label class="block text-gray-700 font-semibold">Mobile Number:</label>
                            <p class="text-gray-900 text-lg">+91 <%= user.info.mobile %></p>
                        </div>
                        <div>
                            <label class="block text-gray-700 font-semibold">Role:</label>
                            <p class="text-gray-900 text-lg"><%= user.role %></p>
                        </div>
                        <div>
                            <label class="block text-gray-700 font-semibold">Department:</label>
                            <p class="text-gray-900 text-lg"><%= user.info.department %></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
<% } else { %>
    <!-- Admin Profile Completion Form -->
    <div class="flex items-center justify-center min-h-screen bg-gray-100">
        <div class="bg-white p-12 rounded-lg shadow-lg max-w-xl w-full">
            <h2 class="text-3xl font-bold text-center mb-8">Complete Admin Profile</h2>
            <form action="/login/admin/profile" method="post" class="space-y-6">
                <div>
                    <label for="passkey" class="block text-gray-700 font-semibold">Passkey</label>
                    <input type="text" id="passkey" name="passkey" required
                        class="w-full px-4 py-3 border rounded-md focus:ring focus:ring-blue-300"
                        placeholder="Enter passkey">
                    <p class="text-sm text-gray-500">Enter passkey to complete admin profile</p>
                </div>
                <div>
                    <label for="number" class="block text-gray-700 font-semibold">Mobile Number</label>
                    <input type="text" id="number" name="number" required
                        class="w-full px-4 py-3 border rounded-md focus:ring focus:ring-blue-300"
                        placeholder="Mobile number">
                    <p class="text-sm text-gray-500">Do not include +91</p>
                </div>
                <div>
                    <label for="department" class="block text-gray-700 font-semibold">Department</label>
                    <select id="department" name="department" required
                        class="w-full px-4 py-3 border rounded-md focus:ring focus:ring-blue-300">
                        <option value="" disabled selected>Select department</option>
                        <option value="Computer Engineering">Computer Engineering</option>
                        <option value="Information Technology">Information Technology</option>
                        <option value="Electronics & Telecommunication">Electronics & Telecommunication</option>
                        <option value="Mechanical Engineering">Mechanical Engineering</option>
                        <option value="Civil Engineering">Civil Engineering</option>
                        <option value="Instrumentation & Control Engineering">Instrumentation & Control Engineering</option>
                        <option value="Robotics & Automation">Robotics & Automation</option>
                        <option value="Artificial Intelligence & Data Science">Artificial Intelligence & Data Science</option>
                    </select>
                </div>
                <button type="submit"
                    class="w-full bg-blue-600 text-white py-3 px-6 rounded-md hover:bg-blue-700 transition">
                    Update
                </button>
            </form>
        </div>
    </div>
    <script src="/js/formValidate.js"></script>
<% } %>
